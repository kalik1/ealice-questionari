<div class="flex flex-col flex-auto min-w-0">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent">
        <div class="flex-1 min-w-0">
            <div class="text-2xl font-semibold">Aggiungi Nuova Cooperativa</div>
        </div>
    </div>

    <!-- Form -->
    <div class="flex flex-auto overflow-hidden">
        <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
            <form [formGroup]="addCoopForm" class="p-6 sm:p-8">

                <!-- Nome -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Nome Cooperativa *
                    </label>
                    <input
                        formControlName="name"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="Inserisci il nome della cooperativa"
                        [class.border-red-500]="addCoopForm.get('name')?.invalid && addCoopForm.get('name')?.touched"
                    />
                    <div *ngIf="addCoopForm.get('name')?.invalid && addCoopForm.get('name')?.touched"
                         class="text-red-500 text-sm mt-1">
                        {{ getErrorMessage('name') }}
                    </div>
                </div>

                <!-- Email -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Email *
                    </label>
                    <input
                        formControlName="email"
                        type="email"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="Inserisci l'email della cooperativa"
                        [class.border-red-500]="addCoopForm.get('email')?.invalid && addCoopForm.get('email')?.touched"
                    />
                    <div *ngIf="addCoopForm.get('email')?.invalid && addCoopForm.get('email')?.touched"
                         class="text-red-500 text-sm mt-1">
                        {{ getErrorMessage('email') }}
                    </div>
                </div>

                <!-- Telefono -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Telefono
                    </label>
                    <input
                        formControlName="phone"
                        type="tel"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="Inserisci il numero di telefono (opzionale)"
                    />
                </div>

                <!-- Errori di salvataggio -->
                <div *ngIf="saveErrors.length > 0" class="mb-6">
                    <div class="bg-red-50 border border-red-200 rounded-md p-4">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <mat-icon class="text-red-400" [svgIcon]="'heroicons_outline:exclamation'"></mat-icon>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-red-800">Errore durante il salvataggio</h3>
                                <div class="mt-2 text-sm text-red-700">
                                    <ul class="list-disc pl-5 space-y-1">
                                        <li *ngFor="let error of saveErrors">{{ error }}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="flex justify-end space-x-3 pt-6 border-t">
                    <button
                        type="button"
                        mat-button
                        (click)="close()"
                        class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors">
                        Annulla
                    </button>
                    <button
                        type="button"
                        mat-flat-button
                        [color]="'primary'"
                        [disabled]="formHasError() || addCoopForm.invalid"
                        (click)="saveCooperative()"
                        class="px-4 py-2 text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 rounded-md transition-colors">
                        Salva
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
